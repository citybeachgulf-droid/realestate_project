{% extends 'base.html' %}
{% block title %}{{ _('Tenant Dashboard') }}{% endblock %}
{% block content %}
<h3 class="mb-3">{{ _('Tenant Dashboard') }}</h3>
<div class="row">
  <div class="col-md-6">
    <h5>{{ _('My Contracts') }}</h5>
    <ul class="list-group">
      {% for c in contracts %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        #{{ c.id }} - {{ c.property.title }}
        <span class="badge text-bg-secondary">{{ c.status }}</span>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h5>{{ _('Invoices & Payments') }}</h5>
    <ul class="list-group">
      {% for p in payments %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ _('Due') }}: {{ p.due_date }} â€” {{ _('Amount') }}: {{ p.amount }}
        <span class="badge {{ 'text-bg-success' if p.status=='paid' else 'text-bg-warning' }}">{{ p.status }}</span>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5>{{ _('My Maintenance Requests') }}</h5>
      <a class="btn btn-sm btn-primary" href="{{ url_for('tenant.maintenance_create') }}">{{ _('New Request') }}</a>
    </div>
    <ul class="list-group">
      {% for m in maintenance_requests %}
      <a class="list-group-item list-group-item-action" href="{{ url_for('tenant.maintenance_show', request_id=m.id) }}">
        <div class="d-flex justify-content-between">
          <div>
            <strong>{{ m.title }}</strong>
            <div class="text-muted small">{{ m.description }}</div>
          </div>
          <span class="badge text-bg-secondary">{{ m.status }}</span>
        </div>
      </a>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5>{{ _('My Complaints') }}</h5>
      <a class="btn btn-sm btn-primary" href="{{ url_for('tenant.complaint_create') }}">{{ _('New Complaint') }}</a>
    </div>
    <ul class="list-group">
      {% for c in complaints %}
      <a class="list-group-item list-group-item-action" href="{{ url_for('tenant.complaint_show', complaint_id=c.id) }}">
        <div class="d-flex justify-content-between">
          <div>
            <strong>{{ c.subject }}</strong>
            <div class="text-muted small">{{ c.description }}</div>
          </div>
          <span class="badge text-bg-secondary">{{ c.status }}</span>
        </div>
      </a>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
