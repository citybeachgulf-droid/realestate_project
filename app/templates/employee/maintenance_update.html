{% extends 'base.html' %}
{% block title %}{{ _('Update Maintenance Request') }}{% endblock %}

{% block content %}

<!-- Custom Styles -->
<style>
.card-form {
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    padding: 25px;
    margin-top: 20px;
    background-color: #ffffff;
}

.btn-primary, .btn-secondary {
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    transition: all 0.2s ease-in-out;
}

.btn-primary:hover, .btn-secondary:hover {
    transform: translateY(-2px);
}

textarea.form-control {
    resize: vertical;
}

.form-label {
    font-weight: 500;
}
</style>

<div class="card card-form mx-auto" style="max-width: 700px;">
  <h3 class="text-center mb-4"><i class="bi bi-tools me-1"></i>{{ _('Update Maintenance Request') }}</h3>
  <form method="post">
    
    <div class="mb-3">
      <label class="form-label"><i class="bi bi-tag me-1"></i>{{ _('Title') }}</label>
      <input type="text" class="form-control" value="{{ m.title }}" disabled>
    </div>

    <div class="mb-3">
      <label class="form-label"><i class="bi bi-card-text me-1"></i>{{ _('Description') }}</label>
      <textarea class="form-control" rows="3" disabled>{{ m.description }}</textarea>
    </div>

    <div class="mb-3">
      <label class="form-label"><i class="bi bi-info-circle me-1"></i>{{ _('Status') }}</label>
      <select name="status" class="form-select">
        {% set statuses = ['new', 'in_progress', 'resolved', 'closed'] %}
        {% for s in statuses %}
        <option value="{{ s }}" {{ 'selected' if m.status==s else '' }}>{{ s|replace('_', ' ')|capitalize }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label"><i class="bi bi-journal-text me-1"></i>{{ _('Notes') }}</label>
      <textarea name="notes" class="form-control" rows="4">{{ m.notes or '' }}</textarea>
    </div>

    <hr>
    <h5 class="mb-3"><i class="bi bi-wallet2 me-1"></i>{{ _('Record Maintenance Expense (optional)') }}</h5>
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">{{ _('Amount') }}</label>
        <input type="number" name="expense_amount" class="form-control" step="0.01" min="0" placeholder="0.00">
      </div>
      <div class="col-md-4">
        <label class="form-label">{{ _('Date') }}</label>
        <input type="date" name="expense_date" class="form-control">
      </div>
      <div class="col-12">
        <label class="form-label">{{ _('Description') }}</label>
        <input type="text" name="expense_description" class="form-control" placeholder="{{ _('e.g., Spare parts, technician fee') }}">
      </div>
    </div>

    <div class="d-flex gap-2 mt-3">
      <button class="btn btn-primary" type="submit"><i class="bi bi-save me-1"></i>{{ _('Save') }}</button>
      <a class="btn btn-secondary" href="{{ url_for('employee.dashboard') }}"><i class="bi bi-x-circle me-1"></i>{{ _('Cancel') }}</a>
    </div>
  </form>
</div>

{% endblock %}
