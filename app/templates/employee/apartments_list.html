{% extends 'base.html' %}
{% block title %}{{ _('Apartments in') }} {{ building.title }}{% endblock %}

{% block content %}

<!-- Custom Styles -->
<style>
.table thead th {
    background-color: #f8f9fa;
    font-weight: 600;
}

.table tbody tr:hover {
    background-color: #f1f5f9;
}

.btn {
    transition: all 0.2s ease-in-out;
}

.btn:hover {
    transform: translateY(-2px);
}

.card-header-title {
    font-weight: 600;
}
</style>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3><i class="bi bi-building me-2"></i>{{ _('Apartments in') }} {{ building.title }}</h3>
  <a class="btn btn-primary" href="{{ url_for('employee.apartments_create', building_id=building.id) }}">
    <i class="bi bi-plus-circle me-1"></i>{{ _('Add Apartment') }}
  </a>
</div>

<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>{{ _('Number') }}</th>
        <th>{{ _('Floor') }}</th>
        <th>{{ _('Bedrooms') }}</th>
        <th>{{ _('Bathrooms') }}</th>
        <th>{{ _('Rent') }}</th>
        <th>{{ _('Status') }}</th>
        <th>{{ _('Actions') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for a in apartments %}
      <tr>
        <td>{{ a.id }}</td>
        <td>{{ a.number or '-' }}</td>
        <td>{{ a.floor or '-' }}</td>
        <td>{{ a.bedrooms or '-' }}</td>
        <td>{{ a.bathrooms or '-' }}</td>
        <td>{{ a.rent_price or '-' }}</td>
        <td>
          {% if a.status == 'available' %}
            <span class="badge bg-success">{{ _('Available') }}</span>
          {% elif a.status == 'occupied' %}
            <span class="badge bg-warning text-dark">{{ _('Occupied') }}</span>
          {% elif a.status == 'maintenance' %}
            <span class="badge bg-danger">{{ _('Maintenance') }}</span>
          {% else %}
            <span class="badge bg-secondary">{{ a.status }}</span>
          {% endif %}
        </td>
        <td>
          <a class="btn btn-sm btn-secondary me-1" href="{{ url_for('employee.apartments_edit', apt_id=a.id) }}">
            <i class="bi bi-pencil-square me-1"></i>{{ _('Edit') }}
          </a>
          <form method="post" action="{{ url_for('employee.apartments_delete', apt_id=a.id) }}" style="display:inline" onsubmit="return confirm('{{ _('Are you sure?') }}');">
            <button class="btn btn-sm btn-outline-danger">
              <i class="bi bi-trash me-1"></i>{{ _('Delete') }}
            </button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="8" class="text-center py-4">{{ _('No data') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<a class="btn btn-secondary mt-3" href="{{ url_for('employee.properties_list') }}">
  <i class="bi bi-arrow-left-circle me-1"></i>{{ _('Back') }}
</a>

{% endblock %}
