{% extends 'base.html' %}
{% block title %}{{ _('Employee Dashboard') }}{% endblock %}

{% block content %}

<style>
/* تصميم شبكة الكروت */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

/* كرت واحد */
.dashboard-card {
  background-color: #fff;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  cursor: pointer;
  transition: 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.dashboard-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

.dashboard-card i {
  font-size: 2.5rem;
  margin-bottom: 8px;
  color: #0d6efd;
}

.dashboard-card span {
  font-weight: 600;
  font-size: 0.95rem;
  display: block;
}

.badge-status {
  font-size: 0.75rem;
  padding: 2px 6px;
  border-radius: 6px;
  margin-top: 4px;
  display: inline-block;
}
.status-available { background: #198754; color: #fff; }
.status-occupied { background: #ffc107; color: #000; }
.status-maintenance { background: #dc3545; color: #fff; }
</style>

<h3 class="mb-4"><i class="bi bi-speedometer2 me-1"></i>{{ _('Employee Dashboard') }}</h3>

<!-- كروت رئيسية لكل قسم -->
<div class="dashboard-grid">
  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.properties_list') }}'">
    <i class="bi bi-building"></i>
    <span>{{ _('Properties') }}</span>
    <span class="badge-status">{{ properties|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.contracts_list') }}'">
    <i class="bi bi-file-text"></i>
    <span>{{ _('Contracts') }}</span>
    <span class="badge-status">{{ contracts|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.rent_collection_list') }}'">
    <i class="bi bi-cash-coin"></i>
    <span>{{ _('Rent Collection') }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.maintenance_list') }}'">
    <i class="bi bi-tools"></i>
    <span>{{ _('Maintenance Requests') }}</span>
    <span class="badge-status">{{ maintenance_requests|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.complaints_list') }}'">
    <i class="bi bi-exclamation-triangle"></i>
    <span>{{ _('Complaints') }}</span>
    <span class="badge-status">{{ complaints|length }}</span>
  </div>
</div>

<!-- أحدث العقارات -->
<h5 class="mt-4 mb-2"><i class="bi bi-building me-1"></i>{{ _('Recent Properties') }}</h5>
<div class="dashboard-grid">
  {% for p in properties[:6] %}
  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.properties_edit', prop_id=p.id) }}'">
    <i class="bi bi-house-door"></i>
    <span>{{ p.title }}</span>
    {% if p.status == 'available' %}
      <span class="badge-status status-available">{{ _('Available') }}</span>
    {% elif p.status == 'occupied' %}
      <span class="badge-status status-occupied">{{ _('Occupied') }}</span>
    {% elif p.status == 'maintenance' %}
      <span class="badge-status status-maintenance">{{ _('Maintenance') }}</span>
    {% else %}
      <span class="badge-status">{{ p.status }}</span>
    {% endif %}
  </div>
  {% else %}
  <div>{{ _('No properties yet') }}</div>
  {% endfor %}
</div>

{% endblock %}
