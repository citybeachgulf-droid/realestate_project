{% extends 'base.html' %}
{% block title %}{{ _('Employee Dashboard') }}{% endblock %}
{% block content %}
<h3 class="mb-3">{{ _('Employee Dashboard') }}</h3>
<div class="row">
  <div class="col-md-6">
    <h5>{{ _('Recent Properties') }}</h5>
    <ul class="list-group">
      {% for p in properties %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ p.title }} <span class="badge text-bg-secondary">{{ p.status }}</span>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h5>{{ _('Recent Contracts') }}</h5>
    <ul class="list-group">
      {% for c in contracts %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        #{{ c.id }} <span class="badge text-bg-secondary">{{ c.status }}</span>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <h5>{{ _('Recent Maintenance Requests') }}</h5>
    <ul class="list-group">
      {% for m in maintenance_requests %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <div>{{ m.title }}</div>
          {% if m.notes %}<div class="text-muted small">{{ _('Notes') }}: {{ m.notes }}</div>{% endif %}
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="badge text-bg-secondary">{{ m.status }}</span>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('employee.maintenance_update', req_id=m.id) }}">{{ _('Update') }}</a>
        </div>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h5>{{ _('Recent Complaints') }}</h5>
    <ul class="list-group">
      {% for c in complaints %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <div>{{ c.subject }}</div>
          {% if c.notes %}<div class="text-muted small">{{ _('Notes') }}: {{ c.notes }}</div>{% endif %}
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="badge text-bg-secondary">{{ c.status }}</span>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('employee.complaint_update', comp_id=c.id) }}">{{ _('Update') }}</a>
        </div>
      </li>
      {% else %}
      <li class="list-group-item">{{ _('No data') }}</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
